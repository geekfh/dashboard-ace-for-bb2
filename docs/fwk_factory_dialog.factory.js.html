<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Assets.js - API Document</title>
    
    <meta name="description" content="统一运管平台基础前端框架" />
    
        <meta name="keywords" content="assets, oms, hefeng, iBoxpay" />
        <meta name="keyword" content="assets, oms, hefeng, iBoxpay" />
    
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"Assets.js","meta":{"title":"Assets.js - API Document","description":"统一运管平台基础前端框架","keyword":"assets, oms, hefeng, iBoxpay"},"linenums":true};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">Assets.js</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="App">
            <span class="title">
                <a href="App.html">App</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="App.__events__"><a href="App.html#.__events__">__events__</a></li>
            
                <li data-name="App.__module__"><a href="App.html#.__module__">__module__</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="App.canRepeatShow"><a href="App.html#.canRepeatShow">canRepeatShow</a></li>
            
                <li data-name="App.closeTabViewById"><a href="App.html#.closeTabViewById">closeTabViewById</a></li>
            
                <li data-name="App.getCurTabPaneEl"><a href="App.html#.getCurTabPaneEl">getCurTabPaneEl</a></li>
            
                <li data-name="App.loadModule"><a href="App.html#.loadModule">loadModule</a></li>
            
                <li data-name="App.maskCurTab"><a href="App.html#.maskCurTab">maskCurTab</a></li>
            
                <li data-name="App.show"><a href="App.html#.show">show</a></li>
            
                <li data-name="App.showTabViewById"><a href="App.html#.showTabViewById">showTabViewById</a></li>
            
                <li data-name="App.unMaskCurTab"><a href="App.html#.unMaskCurTab">unMaskCurTab</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="App.Factory">
            <span class="title">
                <a href="App.Factory.html">App.Factory</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="App.Factory.createDialog"><a href="App.Factory.html#.createDialog">createDialog</a></li>
            
                <li data-name="App.Factory.createJqGrid"><a href="App.Factory.html#.createJqGrid">createJqGrid</a></li>
            
                <li data-name="App.Factory.createTheDialog"><a href="App.Factory.html#.createTheDialog">createTheDialog</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="Ctx">
            <span class="title">
                <a href="Ctx.html">Ctx</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="Ctx.avail"><a href="Ctx.html#.avail">avail</a></li>
            
                <li data-name="Ctx.getBrhAccessLevels"><a href="Ctx.html#.getBrhAccessLevels">getBrhAccessLevels</a></li>
            
                <li data-name="Ctx.getBrhCode"><a href="Ctx.html#.getBrhCode">getBrhCode</a></li>
            
                <li data-name="Ctx.getBrhLevel"><a href="Ctx.html#.getBrhLevel">getBrhLevel</a></li>
            
                <li data-name="Ctx.getDefaultRoleGroupMap"><a href="Ctx.html#.getDefaultRoleGroupMap">getDefaultRoleGroupMap</a></li>
            
                <li data-name="Ctx.getLeafBrhLevel"><a href="Ctx.html#.getLeafBrhLevel">getLeafBrhLevel</a></li>
            
                <li data-name="Ctx.getUser"><a href="Ctx.html#.getUser">getUser</a></li>
            
                <li data-name="Ctx.getUUID"><a href="Ctx.html#.getUUID">getUUID</a></li>
            
                <li data-name="Ctx.isLeafBrh"><a href="Ctx.html#.isLeafBrh">isLeafBrh</a></li>
            
                <li data-name="Ctx.isTopBrh"><a href="Ctx.html#.isTopBrh">isTopBrh</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="module:typeaheadFactory">
            <span class="title">
                <a href="module-typeaheadFactory.html">module:typeaheadFactory</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="module:typeaheadFactory.createModel"><a href="module-typeaheadFactory.html#.createModel">createModel</a></li>
            
                <li data-name="module:typeaheadFactory.getModel"><a href="module-typeaheadFactory.html#.getModel">getModel</a></li>
            
                <li data-name="module:typeaheadFactory.newTypeahead"><a href="module-typeaheadFactory.html#.newTypeahead">newTypeahead</a></li>
            
                <li data-name="module:typeaheadFactory.removeModel"><a href="module-typeaheadFactory.html#.removeModel">removeModel</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="fwk_factory_dialog.factory.js.html">Source: fwk/factory/dialog.factory.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 增强jquery.ui.dialog
 *
 * 增强配置：
 * destroyOnClose
 * 
 */
define(['jquery-ui',
    'assets/scripts/fwk/component/Dialog'
], function(x, Dialog) {
    /**
     * 创建Dialog
     * @memberof App.Factory
     * @param {DOM} el - jQuery/DOM对象
     * @param {Object} options - jquery-ui Dialog插件配置项
     * @returns {jQuery} Dialog
     * @see http://jqueryui.com/dialog/
     */
    function createDialog (el, options) {
        var $el = $(el);
        adapt($el, options);

        var $dialog = $el.dialog(options);

        // 当停止改变弹框窗口宽高，则让弹框居中
        $dialog.dialog({
            resizeStop: function () {
                _resize.call($dialog);
                $dialog.trigger('resize.stop');
            }
        });

        $(window).on('resize.dialog', _.bind(_resize, $dialog));

        $(window).triggerHandler('resize.dialog');

        return $dialog;
    }

    var DEFAULT_BUTTONS = {
        'cancel': {
            className: 'cancel',
            icons: { primary: 'icon-remove' },
            text: '取消',
            click: function () {
                $( this ).dialog( "close" );
            }
        },
        'submit': {
            className: 'submit',
            icons: { primary: 'icon-ok' },
            text: '提交'
        },
        'save': {
            className: 'save',
            icons: { primary: 'icon-ok' },
            text: '保存'
        }
    };

    function adapt ($el, options) {

        /*$el.on('dialogdestroy', function () {
            alert('destroy');
        });*/

        $el.on('dialogopen', function () {
            style(this);

            if(options.modal) {
                Opf.UI.fixedBody(true);

                $el.on('dialogclose', function () {
                    Opf.UI.fixedBody(false);                
                });
            }
        });

        if($.isArray(options.buttons)) {

            _.each(options.buttons, function (btn) {

                if(DEFAULT_BUTTONS[btn.type]) {

                    _.mergeIf(btn, DEFAULT_BUTTONS[btn.type]);
                }
            });
        }

        $el.on('dialogclose', function () {
            if(options.destroyOnClose) {
                $(this).dialog('destroy');
            }
        });
    }

    function style (dialog) {
        var $dialog = $(dialog);
        $dialog.closest('.ui-dialog').addClass('ui-jqdialog');
        $dialog.prev('.ui-widget-header').find('.ui-dialog-title').addClass('ui-jqdialog-title');

        $dialog.addClass('ui-jqdialog-content');
        var $btnPanel = $dialog.next('.ui-dialog-buttonpane');
        $btnPanel.find('button').addClass('fm-button  ui-corner-all fm-button-icon-left btn btn-sm btn-primary');
        $btnPanel.find('button[type="cancel"]').removeClass('btn-primary');
        $btnPanel.find('button .ui-icon').removeClass('ui-icon');
        $btnPanel.find('.ui-button-text').removeClass('ui-button-text').addClass('text');
    }

    function _resize(){
        var $dialog = $(this);
        var $dialogWrap = $dialog.closest('.ui-dialog');
        // 在改变弹框窗口宽高的过程中，不让该弹框自动居中
        if(!$dialogWrap.hasClass('ui-dialog-resizing')){
            $dialogWrap.position({
                my: 'center center',
                at: 'center center',
                of : window
            });
        }
    }


    /**
     * 基于jQuery-UI Dialog创建
     * @memberof App.Factory
     * @param {Object} options - jquery-ui Dialog插件配置项
     * @returns {ItemView} - Marionette.ItemView实例
     * @see http://jqueryui.com/dialog/
     */
    function createTheDialog (options) {
        return new Dialog(options);
    }

    return {
        createDialog: createDialog,
        createTheDialog: createTheDialog
    };

});</code></pre>
        </article>
    </section>






        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
